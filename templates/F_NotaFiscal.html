<!doctype html>
<html lang="en">
  <head>
    <style type="text/css">
      /* Style the tab */
      /* Style the tab */
      .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        /*background-color: #f1f1f1;*/
        background-color: white;
      }

      /* Style the buttons that are used to open the tab content */
      .tab button {
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        color: black;
      }

      /* Change background color of buttons on hover */
      .tab button:hover {
       background-color: #ddd;
       color: white;
      }

      /* Create an active/current tablink class */
      .tab button.active {
        /*background-color: #ccc;*/
        background-color: navy;
        color: white;
      }

      /* Style the tab content */
      .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
      }

      .tabcontent2 {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
      }
      textarea {
          font-size: 20px; 
          font-weight: bold; 
          color: #00bfff;
          letter-spacing: 1px;
          text-align: left;
          padding: 5px;
          line-height: 1.5;
          border-radius: 5px;
          border: 1px solid #ccc;
      }
        label{
          margin-bottom: -10px;
          font-weight: bold;
          font-size: 13px;
        }
        .w_load_icon{
          display: inline-block;
          width: 32px;
          height: 32px;
          background: url(/images/w_load.gif) no-repeat;
        }

        .w_load_body{
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(233, 233, 232, 0.5);
        }

        #loader {
          position: absolute;
          left: 50%;
          top: 10%;
          z-index: 1;
          margin: -50px 0 0 -50px;
          border: 16px solid #f3f3f3;
          border-radius: 50%;
          border-top: 16px solid #3498db;
          width: 90px;
          height: 90px;
          -webkit-animation: spin 2s linear infinite;
          animation: spin 2s linear infinite;
        }      

        #loader2 {
          position: absolute;
          left: 50%;
          top: 50%;
          z-index: 1;
          margin: -50px 0 0 -50px;
          border: 16px solid #f3f3f3;
          border-radius: 50%;
          border-top: 16px solid #3498db;
          width: 90px;
          height: 90px;
          -webkit-animation: spin 2s linear infinite;
          animation: spin 2s linear infinite;
        }      

        #loader3 {
          position: absolute;
          left: 50%;
          top: 85%;
          z-index: 1;
          margin: -50px 0 0 -50px;
          border: 16px solid #f3f3f3;
          border-radius: 50%;
          border-top: 16px solid #3498db;
          width: 90px;
          height: 90px;
          -webkit-animation: spin 2s linear infinite;
          animation: spin 2s linear infinite;
        }      


        @-webkit-keyframes spin {
          0% { -webkit-transform: rotate(0deg); }
          100% { -webkit-transform: rotate(360deg); }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

  /* Add animation to "page content" */
        .animate-bottom {
          position: relative;
          -webkit-animation-name: animatebottom;
          -webkit-animation-duration: 1s;
          animation-name: animatebottom;
          animation-duration: 1s
        }

        @-webkit-keyframes animatebottom {
          from { bottom:-100px; opacity:0 } 
          to { bottom:0px; opacity:1 }
        }

        @keyframes animatebottom { 
          from{ bottom:-100px; opacity:0 } 
          to{ bottom:0; opacity:1 }
        }

        .red {
              background-color: red !important;
              color: white;
        }   

        #Lote{
            background:#1C1C1C;
            left: -300px; 
            margin-top: -170px; 
            height: 200px; 
            width: 200px; 
            position: absolute;       
            border-radius: 5px;          
            -webkit-box-shadow: 9px 7px 5px rgba(50, 50, 50, 0.77);
            -moz-box-shadow:    9px 7px 5px rgba(50, 50, 50, 0.77);
            box-shadow:         9px 7px 5px rgba(50, 50, 50, 0.77);
          }

      .dropdown {
        position: relative;
        display: inline-block;
      }

      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f6f6f6;
        min-width: 280px;
        overflow: auto;
        border: 1px solid #ddd;
        z-index: 1;
      }

      .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
      }

	  .myDropdownA:hover {background-color: #ddd;}
	  .myDropdownA: hover {background-color: #ddd;}

      .show {display: block;}
</style>
  </head>
  <body>

  <div class="container">
    <form>
    <span class="text-uppercase page-subtitle">{%CaminhoPao%}</span>
    <div class="card mb-3">

      <div class="card-header" style="background: navy; height: 70px">
        <span class="text-uppercase page-subtitle" style="font-size: 25px">
          <svg xmlns="http://www.w3.org/2000/svg" width="70" height="35" fill="currentColor" class="bi bi-window-split" viewBox="0 0 16 16">
            <path d="M2.5 4a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1Zm2-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Zm1 .5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1Z"/>
            <path d="M2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H2Zm12 1a1 1 0 0 1 1 1v2H1V3a1 1 0 0 1 1-1h12ZM1 13V6h6.5v8H2a1 1 0 0 1-1-1Zm7.5 1V6H15v7a1 1 0 0 1-1 1H8.5Z"/>
          </svg>                        
          <span>Nota Fiscal</span>
        </span>
        <div style="float: right">
          <div class="btn-group" style="margin-top: -15px">
            <button type="button" id="IWBUTTONINCLUI"  class="btn btn-primary" data-toggle="tooltip"   data-placement="top" style="width: 100px" title="Inclui orçamento">Inclui</button>
            <button type="button" id="IWBUTTONALTERA" class="btn btn-warning" data-toggle="tooltip"   data-placement="top" style="width: 100px; margin-left: 10px" title="Altera">Altera</button>
            <button type="button" id="IWBUTTONCONFIRMA" class="btn btn-success" data-toggle="tooltip"   data-placement="top" style="width: 100px; margin-left: 10px" title="Confirma">Confirma</button>
            <button type="button" id="IWBUTTONCANCELA" class="btn btn-danger" data-toggle="tooltip"   data-placement="top" style="width: 100px; margin-left: 10px" title="Cancela">Cancela</button>
            <button type="button" id="IWBUTTONEXCLUI" class="btn btn-dark" data-toggle="tooltip"   data-placement="top" style="width: 100px; margin-left: 10px" title="Exclui">Exclui</button>
          </div>

          <div class="dropdown">
          	<a onclick="myFunction();"><i class="material-icons" style="font-size: 30px; margin-left: 20px">more_vert</i></a>

            <div id="myDropdown" class="dropdown-content">
              <a class="myDropdownA" id="importaorcamentoitem" onclick="importaOrcamento();">Importa Orçamento</a>
              <a class="myDropdownA" id="autorizanfeitem" onclick="autorizaNFeNFCe();">Autoriza NFe/NFCe</a>
            </div>
          </div>

		

        </div>                               

      </div>  

      <div class="card-body">
          <div class="tab">
            <button class="tablinks" onclick="openTab(event, 'Ficha')" id="defaultOpen" style="font-color: white" >Ficha</button>
            <button class="tablinks" onclick="openTab(event, 'Lista')">Lista</button>
          </div>

          <div id="Ficha" class="tabcontent">
            <div id="cadastroPessoa" style="display: block;">
              <div class="row">
                <div class="col col-md-12">
                  <div class="page-header row no-gutters py-2 mb-2 border-bottom" style="margin-top: 0px">
                    <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
                      <h3 class="page-title" style="font-size: 20px">Dados da Nota Fiscal</h3>
                    </div>                        
                  </div>
                  <div class="row">
                    <div class="col col-md-2">
                        <span class="text-uppercase page-subtitle">Nº Pedido</span>
                        {%IWEDITPEDIDO%}
                    </div>              
                    <div class="col col-md-2">
                        <span class="text-uppercase page-subtitle">Data Emissão</span>
                        {%IWEDITDATAEMISSAO%}
                    </div>              
                    <div class="col col-md-4">
                        <span class="text-uppercase page-subtitle">Modelo</span><br>
                        <select id="selectmodelo" style="width: 320px; height: 45px; font-weight: bold; font-size: 20px; color: #00bfff" required="true" disabled="true">
                        </select>
                    </div>              
                    <div class="col col-md-2">
                        <span class="text-uppercase page-subtitle">Total Nota</span>
                        {%IWEDITTOTAL%}
                    </div>              
                    <div class="col col-md-2">
                        <span class="text-uppercase page-subtitle">Origem</span>
                        {%IWEDITORIGEM%}
                    </div>              
                  </div>
                  <div class="row">
                    <div class="col col-md-2">
                      <span class="text-uppercase page-subtitle">Espécie</span>
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i id="helpespecie" class="fas fa-search" onclick="chamaHelpValidacao('especie');"></i>
                          </span>                                     
                        </div>
                        {%IWEDITESPECIE%}
                      </div>
                    </div>              
                    <div class="col col-md-2">
                      <span class="text-uppercase page-subtitle">Série/Sub</span>
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i id="helpserie" class="fas fa-search" onclick="chamaHelpValidacao('série');"></i>
                          </span>                                     
                        </div>
                        {%IWEDITSERIE%}
                      </div>
                    </div>   
                    <div class="col col-md-4">
                        <span class="text-uppercase page-subtitle">Nº Documento</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text">
                              <i id="situacaonota" style="display: none;">A</i>
                            </span>                                     
                          </div>
                          {%IWEDITNUMERODOCUMENTO%}
                        </div>
                    </div>                                             
                    <div class="col col-md-2">
                        <span class="text-uppercase page-subtitle">Ordem Compra</span>
                        {%IWEDITORDEMCOMPRA%}
                    </div>              
                    <div class="col col-md-2">
                        <span class="text-uppercase page-subtitle">Ordem Serviço</span>
                        {%IWEDITORDEMSERVICO%}
                    </div>              
                  </div>
                  <div class="row" style="margin-top: -15px">
                    <div class="col col-md-8">
                        <span class="text-uppercase page-subtitle">Chave NFe/NFCe</span>
                        {%IWEDITCHAVENFE%}
                    </div>              
                    <div class="col col-md-2">
                        <span class="text-uppercase page-subtitle">Data Saída</span>
                        {%IWEDITDATASAIDA%}
                    </div>              
                    <div class="col col-md-2">
                        <span class="text-uppercase page-subtitle">Hora Saída</span>
                        {%IWEDITHORASAIDA%}
                    </div>              
                  </div>
                  <div class="row">
                    <div class="col col-md-6">
                      <span class="text-uppercase page-subtitle">Nome Cliente</span>
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i id="helpcliente" class="fas fa-search" onclick="chamaHelpCliente('cliente');"></i>
                          </span>                                     
                        </div>
                        {%IWEDITNOMECLIENTE%}
                      </div>
                    </div>              
                    <div class="col col-md-6">
                      <span class="text-uppercase page-subtitle">Condição Pagamento</span>
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i id="helpcondicao" class="fas fa-search" onclick="chamaHelpCondicao();"></i>
                          </span>                                     
                        </div>
                        {%IWEDITCONDICAOPAGAMENTO%}
                      </div>
                    </div>              
                  </div>
                  <div class="row" style="margin-top: -15px">
                    <div class="col col-md-6">
                      <span class="text-uppercase page-subtitle">Cobrar De</span>
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i id="helpalvo" class="fas fa-search" onclick="chamaHelpCliente('alvo');"></i>
                          </span>                                     
                        </div>
                        {%IWEDITNOMEALVO%}
                      </div>
                    </div>              
                    <div class="col col-md-6">
                      <span class="text-uppercase page-subtitle">Documento Cobrança</span>
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i id="helpcobranca" class="fas fa-search" onclick="chamaHelpCobranca();"></i>
                          </span>                                     
                        </div>
                        {%IWEDITDOCUMENTOCOBRANCA%}
                      </div>
                    </div>              
                  </div>
                  <div class="row" style="margin-top: -15px">
                    <div class="col col-md-6">
                      <span class="text-uppercase page-subtitle">Nome Vendedor</span>
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i id="helpvendedor" class="fas fa-search" onclick="chamaHelpVendedor();"></i>
                          </span>                                     
                        </div>
                        {%IWEDITNOMEVENDEDOR%}
                      </div>
                    </div>              
                    <div class="col col-md-6">
                      <span class="text-uppercase page-subtitle">Classificação Receita</span>
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i id="helpcobranca" class="fas fa-search" onclick="chamaHelpClassificacao();"></i>
                          </span>                                     
                        </div>
                        {%IWEDITCLASSIFICACAO%}
                      </div>
                    </div>              
                  </div>

                </div>
              </div>
              <div class="row">
                <div class="col col-md-9">
                  <div class="page-header row no-gutters py-2 mb-2 border-bottom" style="margin-top: -10px">
                    <div class="col-9 col-sm-4 text-center text-sm-left mb-0">
                      <h3 class="page-title" style="font-size: 20px">Observação</h3>
                    </div>                        
                  </div>
                  <div class="row">
                    <div class="col col-md-12">
                      <label id="Observacao" for="exemplo">Texto:</label>
                    </div>              
                  </div>
                </div>
                <div class="col col-md-3">
                    <div class="page-header row no-gutters py-2 mb-2 border-bottom" style="margin-top: -10px">
                      <div class="col-12 col-sm-12 text-center text-sm-left mb-0">
                        <h3 class="page-title" style="font-size: 20px">CFOP</h3>
                      </div>                        
                    </div>  
                    <div class="table-responsive display" style="margin-top: 0px">
                      <table class="table table-bordered table-hover table-striped table-sm" id="cfops"  width="100%" cellspacing="0">
                        <thead class="thead-dark">
                          <tr>
                          <th width="40%">CFOP</th>
                          <th width="60%" style="text-align: right;">Total</th>
                          </tr>
                        </thead>
                      </table>    
                    </div>                      
                </div>
              </div>
              <div id="divBotoes" class="row" style="display: none;">
                <div class="btn-group" style="margin-left: 15px; margin-top: 10px; margin-bottom: 10px">
                  <button type="button" id="IWBUTTONNOVOITEM"  class="btn btn-primary" style="width: 100px" title="Novo Ítem">Novo Ítem</button>
                  <button type="button" id="IWBUTTONPARCELA" class="btn btn-success" style="width: 100px; margin-left: 10px" title="Parcela">Parcelas</button>
                  <button type="button" id="IWBUTTONOUTROS" class="btn btn-danger" style="width: 100px; margin-left: 10px" title="Outros">Outros</button>
                </div>                
              </div>
            </div>
            <section id="conteudo">
              <div id="itensNota" style="display: block;">
                <div class="row">
                  <div class="col col-md-12">
                    <div class="page-header row no-gutters py-2 mb-2 border-bottom" style="margin-top: 0px">
                      <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
                        <h3 class="page-title" style="font-size: 20px">Ítens</h3>
                      </div>                        
                    </div> 
                  </div>
                </div>
                <div class="table-responsive display" style="margin-top: 10px">
                  <table class="table table-bordered table-hover table-striped table-sm" id="itens"  width="100%" cellspacing="0">
                    <thead class="thead-dark">
                      <tr>
                      <th width="10%">Código</th>
                      <th width="34%">Descrição do Produto</th>
                      <th width="4%">CFOP</th>
                      <th width="7%">Qtde</th>
                      <th width="9%">Unitário</th>
                      <th width="8%">% Desc</th>
                      <th width="8%">$ Desc</th>
                      <th width="12%">Total</th>
                      <th width="8%" style="text-align: center;">Ação</th>
                      </tr>
                    </thead>
                  </table>    
                </div>
              </div>              

              <div id="itemNota" style="display: none;">

                <div class="row">
                  <div class="col col-md-12">
                    <div class="page-header row no-gutters py-2 mb-2 border-bottom" style="margin-top: 0px">
                      <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
                        <h3 class="page-title" style="font-size: 20px">Dados do Ítem</h3>
                      </div>                        
                    </div>
                    <div class="row">
                      <div class="col col-md-3">
                        <span class="text-uppercase page-subtitle">Código</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text">
                              <i id="helpcliente" class="fas fa-search" onclick="chamaHelpProduto('codigo');"></i>
                            </span>                                     
                          </div>
                          {%IWEDITCODIGO%}
                        </div>                    
                      </div>              
                      <div class="col col-md-9">
                        <span class="text-uppercase page-subtitle">Descrição Produto</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text">
                              <i id="helpcliente" class="fas fa-search" onclick="chamaHelpProduto('descricao');"></i>
                            </span>                                     
                          </div>
                          {%IWEDITDESCRICAO%}
                        </div>                   
                      </div>              
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col col-md-3">
                    <span class="text-uppercase page-subtitle">CFOP</span>
                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text">
                          <i id="helpcliente" class="fas fa-search" onclick="chamaHelpCFOP();"></i>
                        </span>                                    
                      </div>
                      {%IWEDITCFOP%}
                    </div>                    
                  </div>                             
                  <div class="col col-md-3">
                    <span class="text-uppercase page-subtitle">Cean</span>
                    {%IWEDITCEAN%}
                  </div>                              
                  <div class="col col-md-3">
                    <span class="text-uppercase page-subtitle">Unidade</span>
                    {%IWEDITUNIDADE%}
                  </div>                             
                  <div class="col col-md-3">
                    <span class="text-uppercase page-subtitle">Valor Unitário</span>
                    {%IWEDITUNITARIO%}
                  </div>                              
                </div>

                <div class="row">
                  <div class="col col-md-3">
                    <div class="page-header row no-gutters py-2 mb-2 border-bottom" style="margin-top: 10px">
                      <div class="col text-center text-sm-left mb-0">
                        <h3 class="page-title" style="font-size: 20px">Totais</h3>
                      </div>                        
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Quantidade</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITQUANTIDADE%}
                        </div>                    
                      </div>                              
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Percentual Desconto</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITPERCDESCONTO%}
                        </div>                    
                      </div>                              
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Valor do Desconto</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITVALORDESCONTO%}
                        </div>                    
                      </div>                              
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Valor Total</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITVALORTOTAL%}
                        </div>                    
                      </div>                             
                    </div>
                  </div>
                  <div class="col col-md-3">
                    <div class="page-header row no-gutters py-2 mb-2 border-bottom" style="margin-top: 10px">
                      <div class="col text-center text-sm-left mb-0">
                        <h3 class="page-title" style="font-size: 20px">ICMS</h3>
                      </div>                        
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">CST</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text">
                              <i id="helpcliente" class="fas fa-search" onclick="chamaHelpCSTICMS();"></i>
                            </span>                                     
                          </div>
                          {%IWEDITCSTICMS%}
                        </div>                    
                      </div>                              
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Alíquota</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text">
                              <i id="helpcliente" class="fas fa-search" onclick="chamaHelpCSTICMS();"></i>
                            </span>                                     
                          </div>
                          {%IWEDITCODALIQICMS%}
                          {%IWEDITALIQICMS%}
                        </div>                    
                      </div>                              
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Valor da Base</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITBASEICMS%}
                        </div>                    
                      </div>                              
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Valor do Imposto</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITVALORICMS%}
                        </div>                    
                      </div>                              
                    </div>
                  </div>
                  <div class="col col-md-3">
                    <div class="page-header row no-gutters py-2 mb-2 border-bottom" style="margin-top: 10px">
                      <div class="col text-center text-sm-left mb-0">
                        <h3 class="page-title" style="font-size: 20px">PIS</h3>
                      </div>                       
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">CST</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text">
                              <i id="helpcliente" class="fas fa-search" onclick="chamaHelpCSTPIS();"></i>
                            </span>                                     
                          </div>
                          {%IWEDITCSTPIS%}
                        </div>                    
                      </div>                              
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Alíquota</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITALIQPIS%}
                        </div>                    
                      </div>                              
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Percentual da Base</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITBASEPIS%}
                        </div>                    
                      </div>                              
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Valor do Imposto</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITVALORPIS%}
                        </div>                    
                      </div>                              
                    </div>
                  </div>
                  <div class="col col-md-3">
                    <div class="page-header row no-gutters py-2 mb-2 border-bottom" style="margin-top: 10px">
                      <div class="col text-center text-sm-left mb-0">
                        <h3 class="page-title" style="font-size: 20px">COFINS</h3>
                      </div>                        
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">CST</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text">
                              <i id="helpcliente" class="fas fa-search" onclick="chamaHelpCSTCOFINS();"></i>
                            </span>                                     
                          </div>
                          {%IWEDITCSTCOFINS%}
                        </div>                    
                      </div>                              
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Alíquota</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITALIQCOFINS%}
                        </div>                    
                      </div>                              
                    </div>
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Percentual da Base</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITBASECOFINS%}
                        </div>                    
                      </div>                              
                    </div>            
                    <div class="row">
                      <div class="col col-md-12">
                        <span class="text-uppercase page-subtitle">Valor do Imposto</span>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                          </div>
                          {%IWEDITVALORCOFINS%}
                        </div>                    
                      </div>                              
                    </div>
                  </div>
                </div>
              </div>

              <div id="parcelasNota" style="display: none;">
                <div class="row">
                  <div class="col col-md-12">
                    <div class="page-header row no-gutters py-2 mb-2 border-bottom" style="margin-top: 0px">
                      <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
                        <h3 class="page-title" style="font-size: 20px">Parcelas</h3>
                      </div>                        
                    </div>                    
                  </div>
                </div>
                <div class="table-responsive display" style="margin-top: 10px">
                  <table class="table table-bordered table-hover table-striped table-sm" id="parcelas"  width="100%" cellspacing="0">
                    <thead class="thead-dark">
                      <tr>
                      <th width="1%">Nº</th>
                      <th width="13%">Vencimento</th>
                      <th width="13%">Situação</th>
                      <th width="13%">Operação</th>
                      <th width="13%">Valor Original</th>
                      <th width="13%">Valor Despesa</th>
                      <th width="13%">Valor Desconto</th>
                      <th width="13%">Valor Final</th>
                      </tr>
                    </thead>
                  </table>    
                </div>
              </div>
            </section>
          </div>

          <div id="Lista" class="tabcontent">
            <div class="table-responsive display" style="margin-top: 10px">
              <table class="table table-bordered table-hover table-striped table-sm" id="notas"  width="100%" cellspacing="0">
                <thead class="thead-dark">
                  <tr>
                  <th width="8%">Nº Ped</th>
                  <th width="10%">Emissão</th>
                  <th width="10%">Nº Docto</th>
                  <th width="31%">Cliente</th>
                  <th width="20%">Condição</th>
                  <th width="10%" style="text-align: right;">Total</th>
                  <th width="10%" style="text-align: center;">Ação</th>
                  </tr>
                </thead>
              </table>    
            </div>



            <div id="loader2" style="display: none;"></div>
          </div>
      </div>
    </div>    
  </form>
  </div>

  <div style="display: none;">{%IWEDITID%}{%IWEDITNOME%}{%IWEDITINTERNO%}{%IWBUTTONACAO%}{%IWEDITPAGELENGTH%}{%IWEDITIDNOTAFISCAL%}{%IWEDITIDPEDIDO%}{%IWEDITIDCLIENTE%}
                              {%IWEDITIDREPRESENTANTE%}{%IWEDITIDCONDICAO%}{%IWEDITIDCOBRANCA%}{%IWEDITOBSERVACAO%}{%IWEDITIDPRODUTO%}{%IWEDITMODELO%}{%IWEDITIDVALIDACAO%}
                              {%IWEDITIDCLASSIFICACAO%}{%IWEDITIDALVO%}

  </div>

<!--Modal Arquivo XML-->
  <div class="modal" id="ModalArquivoXML">
      <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header bg-light">
          <span class="text-uppercase page-subtitle" id="tituloProduto" style="font-size: 15px">Arquivo XML</span>
          <button type="button" class="close" data-dismiss="modal" id="fechaModalProduto">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          {%IWLabelArquivoXML%}
        </div>
      </div>
    </div>
  </div>  

<!--Modal Arquivo PDF-->
  <div class="modal" id="ModalArquivoPDF">
      <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header bg-light">
          <span class="text-uppercase page-subtitle" id="tituloProduto" style="font-size: 15px">Arquivo PDF</span>
          <button type="button" class="close" data-dismiss="modal" id="fechaModalProduto" onclick="fechaModalPDF();">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          {%IWLabelArquivoPDF%}
        </div>
      </div>
    </div>
  </div>  

  <!--Modal Acessa API>-->
  <div class="modal" id="ModalAcessaAPI" data-refresh="true">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
              <h4 class="modal-title" id="tituloAPI">Acessando TrabinAPI</h4>
          </div>

            <div class="modal-body">
              <div class="row">
          <img src="/images/avatars/trabinlogo.jpg" class="mx-auto d-block" width="350" height="150">     
        </div>
            <p align="center" id="statusAutorizacao"></p>         
          </div>
      <!--tela de splash--> 
          <div id="loader3" style="display: none;">            
      </div>
          <div class="modal-footer">
            </div>    
        </div>
    </div>
  </div>  

  <!--Modal Cliente-->
  <div class="modal" id="ModalCliente">
      <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- Modal Header -->
        <!--<div class="modal-header bg-light" style="background: navy">-->
        <div class="modal-header" style="background: navy">
          <span class="text-uppercase page-subtitle" id="tituloCliente" style="font-size: 15px">Seleciona Cliente</span>
          <!--<button type="button" class="close" data-dismiss="modal" id="fechaModalLocalidadex" onclick="fechaModalLocalidade();">&times;</button>-->
        </div>

        <!-- Modal body -->

        <div class="card-body">
          <form>          
            <div class="table-responsive display" style="margin-top: -20px">
              <table class="table table-bordered table-hover table-striped table-sm" id="clientes"  width="100%" cellspacing="0">
                <thead class="thead-dark">
                  <tr>
                  <th width="66%">Nome do Cliente</th>
                  <th width="5%">Código</th>
                  <th width="8%">CPF</th>
                  <th width="8%">RG</th>
                  <th width="8%">CNPJ</th>
                  <th width="5%" style="text-align: center;">Ação</th>
                  </tr>
                </thead>
              </table>    
            </div>
            <div id="loader2" style="display: none;"></div>
          </form>
        </div>        
        <!-- Modal footer -->
      </div>
    </div>
  </div>  

  <!--Modal Vendedor-->
  <div class="modal" id="ModalVendedor">
      <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- Modal Header -->
        <!--<div class="modal-header bg-light" style="background: navy">-->
        <div class="modal-header" style="background: navy">
          <span class="text-uppercase page-subtitle" id="tituloVendedor" style="font-size: 15px">Seleciona Vendedor</span>
          <!--<button type="button" class="close" data-dismiss="modal" id="fechaModalLocalidadex" onclick="fechaModalLocalidade();">&times;</button>-->
        </div>

        <!-- Modal body -->

        <div class="card-body">
          <form>          
            <div class="table-responsive display" style="margin-top: -20px">
              <table class="table table-bordered table-hover table-striped table-sm" id="vendedores"  width="100%" cellspacing="0">
                <thead class="thead-dark">
                  <tr>
                  <th width="66%">Nome do Representante</th>
                  <th width="5%">Código</th>
                  <th width="8%">CPF</th>
                  <th width="8%">RG</th>
                  <th width="8%">CNPJ</th>
                  <th width="5%" style="text-align: center;">Ação</th>
                  </tr>
                </thead>
              </table>    
            </div>
            <div id="loader2" style="display: none;"></div>
          </form>
        </div>        
        <!-- Modal footer -->
      </div>
    </div>
  </div>  


  <!--Modal Cobrança-->
  <div class="modal" id="ModalCobranca">
      <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- Modal Header -->
        <!--<div class="modal-header bg-light" style="background: navy">-->
        <div class="modal-header" style="background: navy">
          <span class="text-uppercase page-subtitle" id="tituloCobranca" style="font-size: 15px">Seleciona Cobrança</span>
          <!--<button type="button" class="close" data-dismiss="modal" id="fechaModalLocalidadex" onclick="fechaModalLocalidade();">&times;</button>-->
        </div>

        <!-- Modal body -->

        <div class="card-body">
          <form>          
            <div class="table-responsive display" style="margin-top: -20px">
              <table class="table table-bordered table-hover table-striped table-sm" id="cobrancas"  width="100%" cellspacing="0">
                <thead class="thead-dark">
                  <tr>
                  <th width="87%">Documento Cobrança</th>
                  <th width="8%">Tipo</th>
                  <th width="5%" style="text-align: center;">Ação</th>
                  </tr>
                </thead>
              </table>    
            </div>
            <div id="loader2" style="display: none;"></div>
          </form>
        </div>        
        <!-- Modal footer -->
      </div>
    </div>
  </div>  

  <!--Modal Classificacao-->
  <div class="modal" id="ModalClassificacao">
      <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- Modal Header -->
        <!--<div class="modal-header bg-light" style="background: navy">-->
        <div class="modal-header" style="background: navy">
          <span class="text-uppercase page-subtitle" id="tituloClassificacao" style="font-size: 15px">Seleciona Classificação</span>
          <!--<button type="button" class="close" data-dismiss="modal" id="fechaModalLocalidadex" onclick="fechaModalLocalidade();">&times;</button>-->
        </div>

        <!-- Modal body -->

        <div class="card-body">
          <form>          
            <div class="table-responsive display" style="margin-top: -20px">
              <table class="table table-bordered table-hover table-striped table-sm" id="classificacoes"  width="100%" cellspacing="0">
                <thead class="thead-dark">
                  <tr>
                  <th width="87%">Descrição Classificação</th>
                  <th width="8%">Tipo</th>
                  <th width="5%" style="text-align: center;">Ação</th>
                  </tr>
                </thead>
              </table>    
            </div>
            <div id="loader2" style="display: none;"></div>
          </form>
        </div>        
        <!-- Modal footer -->
      </div>
    </div>
  </div>  


  <!--Modal Condicao-->
  <div class="modal" id="ModalCondicao">
      <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- Modal Header -->
        <!--<div class="modal-header bg-light" style="background: navy">-->
        <div class="modal-header" style="background: navy">
          <span class="text-uppercase page-subtitle" id="tituloCondicao" style="font-size: 15px">Seleciona Condição</span>
          <!--<button type="button" class="close" data-dismiss="modal" id="fechaModalLocalidadex" onclick="fechaModalLocalidade();">&times;</button>-->
        </div>

        <!-- Modal body -->

        <div class="card-body">
          <form>          
            <div class="table-responsive display" style="margin-top: -20px">
              <table class="table table-bordered table-hover table-striped table-sm" id="condicoes"  width="100%" cellspacing="0">
                <thead class="thead-dark">
                  <tr>
                  <th width="63%">Descrição Condição</th>
                  <th width="10%">Tipo</th>
                  <th width="12%">Nº Pag</th>
                  <th width="12%">P Médio</th>
                  <th width="5%" style="text-align: center;">Ação</th>
                  </tr>
                </thead>
              </table>    
            </div>
            <div id="loader2" style="display: none;"></div>
          </form>
        </div>        
        <!-- Modal footer -->
      </div>
    </div>
  </div>  

    <!--Modal Produto-->
  <div class="modal" id="ModalProduto">
    <div class="modal-dialog modal-lg" >
      <div class="modal-content">
        <!-- Modal Header -->
        <!--<div class="modal-header bg-light" style="background: navy">-->
        <div class="modal-header" style="background: navy">
          <span class="text-uppercase page-subtitle" id="tituloProduto" style="font-size: 15px">Seleciona Produto</span>
          <!--<button type="button" class="close" data-dismiss="modal" id="fechaModalLocalidadex" onclick="fechaModalLocalidade();">&times;</button>-->
        </div>

        <!-- Modal body -->

        <div class="card-body">
          <form>          
            <div class="table-responsive display" style="margin-top: -20px">
              <table class="table table-bordered table-hover table-striped table-sm" id="produtos"  width="100%" cellspacing="0">
                <thead class="thead-dark">
                  <tr>
                  <th width="7%">Código</th>
                  <th width="35%">Descrição do Produto</th>
                  <th width="12%">Estrutural</th>
                  <th width="12%">Referência</th>
                  <th width="9%">CEAN</th>
                  <th width="10%">Preço Venda</th>
                  <th width="10%">Saldo</th>
                  <th width="5%" style="text-align: center;">Ação</th>
                  </tr>
                </thead>
              </table>    
            </div>
            <div id="loader2" style="display: none;"></div>
          </form>
        </div>        
        <!-- Modal footer -->
      </div>
    </div>
  </div>  


    <!--Modal Produto-->
  <div class="modal" id="ModalValidacao">
    <div class="modal-dialog modal-lg" >
      <div class="modal-content">
        <!-- Modal Header -->
        <!--<div class="modal-header bg-light" style="background: navy">-->
        <div class="modal-header" style="background: navy">
          <span class="text-uppercase page-subtitle" id="tituloValidacao" style="font-size: 15px">Seleciona Validação</span>
          <!--<button type="button" class="close" data-dismiss="modal" id="fechaModalLocalidadex" onclick="fechaModalLocalidade();">&times;</button>-->
        </div>

        <!-- Modal body -->

        <div class="card-body">
          <form>          
            <div class="table-responsive display" style="margin-top: -20px">
              <table class="table table-bordered table-hover table-striped table-sm" id="validacoes"  width="100%" cellspacing="0">
                <thead class="thead-dark">
                  <tr>
                  <th width="15%">Abrevia</th>
                  <th width="80%">Descrição</th>
                  <th width="5%" style="text-align: center;">Ação</th>
                  </tr>
                </thead>
              </table>    
            </div>
            <div id="loader2" style="display: none;"></div>
          </form>
        </div>        
        <!-- Modal footer -->
      </div>
    </div>
  </div>  


  <script>
    $(document).ready(function() {      
      $("#IWBUTTONINCLUI").show();
      $("#IWBUTTONALTERA").hide();
      $("#IWBUTTONCONFIRMA").hide();
      $("#IWBUTTONCANCELA").hide();
      $("#IWBUTTONEXCLUI").hide();


       limpaNotaFiscal();
       document.getElementById("defaultOpen").click();
       montaObservacao('')
       $('html,body').scrollTop(0);      
    });

// funções

    $("#IWBUTTONNOVOITEM").click(function(){
      $("#IWBUTTONPARCELA").show();
      $("#IWBUTTONOUTROS").show();
      var elemento  = document.getElementById('IWEDITCHAVENFE');
      if (elemento != '') {
         $("#IWBUTTONNOVOITEM").hide();
      }
      if ($("#IWBUTTONNOVOITEM").text()=='Novo Ítem'){
          $("#IWBUTTONNOVOITEM").hide();
          $("#IWBUTTONNOVOITEM").text("Ítens");
          $("#IWBUTTONPARCELA").text("Confirma");
          $("#IWBUTTONOUTROS").text("Cancela");

          $("#itensNota").hide();
          $("#parcelasNota").hide();
          $("#itemNota").show();

          $("#IWEDITCODIGO").focus();
          $("#IWBUTTONCONFIRMA").hide();
          $("#IWBUTTONCANCELA").hide();
          $("#IWBUTTONINCLUI").hide();
          $("#IWBUTTONEXCLUI").hide();
          $("#IWBUTTONALTERA").hide();

          limpaNotaItem();
          if ($("#IWEDITNUMERO").val()=='') {
             limpaNotaFiscal();
          }
        } else {
          var elemento  = document.getElementById('IWEDITCHAVENFE');
          $("#IWBUTTONNOVOITEM").text("Novo Ítem");
          $("#IWBUTTONPARCELA").text("Parcelas");
          $("#IWBUTTONOUTROS").text("Outros");
          $("#itensNota").show();
          $("#itemNota").hide();
          $("#parcelasNota").hide();
          if (elemento.value!='') {
             $("#IWBUTTONALTERA").hide();
          } else {
             $("#IWBUTTONALTERA").show();            
          }

          $("#IWBUTTONINCLUI").show();
          $("#IWBUTTONEXCLUI").show();

          carregaListaItens(10);
        }
     })

    $("#IWBUTTONPARCELA").click(function(){
      $("#IWBUTTONINCLUI").show();
      $("#IWBUTTONEXCLUI").show();
//      $("#IWBUTTONALTERA").show();

      if ($("#IWBUTTONPARCELA").text()=='Parcelas'){
          $("#IWBUTTONPARCELA").hide();
          $("#IWBUTTONOUTROS").hide();
          $("#IWBUTTONNOVOITEM").show();
          $("#IWBUTTONNOVOITEM").text("Ítens");
          $("#IWBUTTONPARCELA").text("Confirma");
          $("#IWBUTTONOUTROS").text("Cancela");
          $("#parcelasNota").show();
          $("#itensNota").hide();
          $("#itemNota").hide();
          carregaListaParcelas(10);

      } else {
              var elemento  = document.getElementById('IWEDITCODIGO');
              var elemento1 = document.getElementById('IWEDITDESCRICAO');
              var elemento2 = document.getElementById('IWEDITUNITARIO');
              var elemento3 = document.getElementById('IWEDITQUANTIDADE');
              if ((elemento.value=='') || (elemento1.value=='') || (elemento2.value=='') || (elemento3.value=='')) {
                 $("#IWBUTTONINCLUI").hide();
                 $("#IWBUTTONEXCLUI").hide();
                 $("#IWBUTTONALTERA").hide();
                 alert("Campo(s) obrigatório(s) devem ser preenchidos");
                 if (elemento.value=='') {
                    document.getElementById('IWEDITCODIGO').focus();
                 } else if (elemento1.value=='') {
                    document.getElementById('IWEDITDESCRICAO').focus();          
                 } else if (elemento2.value=='') {
                    document.getElementById('IWEDITUNITARIO').focus();          
                 } else if (elemento3.value=='') {
                    document.getElementById('IWEDITQUANTIDADE').focus();          
                 }
               } else {
                $("#IWBUTTONNOVOITEM").show();
                $("#IWBUTTONPARCELA").show();
                $("#IWBUTTONOUTROS").show();
                $("#IWBUTTONNOVOITEM").text("Novo Ítem");
                $("#IWBUTTONPARCELA").text("Parcelas");
                $("#IWBUTTONOUTROS").text("Outros");
                $("#itensNota").show();
                $("#itemNota").hide();
                $("#parcelasNota").hide();          
                confirmaItem();          
                carregaListaItens(10);          
               }

      }
    })

    $("#IWBUTTONOUTROS").click(function(){
      $("#IWBUTTONNOVOITEM").show();
      $("#IWBUTTONINCLUI").show();
      $("#IWBUTTONEXCLUI").show();
      $("#IWBUTTONALTERA").show();
      if ($("#IWBUTTONOUTROS").text()=='Outros'){
          $("#IWBUTTONNOVOITEM").text("Ítens");
          $("#IWBUTTONPARCELA").text("Confirma");
          $("#IWBUTTONOUTROS").text("Cancela");
      } else {
          $("#IWBUTTONNOVOITEM").text("Novo Ítem");
          $("#IWBUTTONPARCELA").text("Parcelas");
          $("#IWBUTTONOUTROS").text("Outros");
          $("#itensNota").show();
          $("#itemNota").hide();

          carregaListaItens(10);          
      }
    })

    $("#IWEDITQUANTIDADE").change(function() {
      calculaTotal();
    });

    $("#IWEDITUNITARIO").change(function() {
      calculaTotal();
    });

    function limpaNotaItem() {
      document.getElementById('IWEDITNOME').value = '[LimpaNotaItem]';
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();                    
    }

    function confirmaItem() {
      $("#loader3").css("display","block");     
      $("#ModalAcessaAPI").modal('show');
      document.getElementById('IWEDITNOME').value = '[ConfirmaItem]';
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();                    
    }

    function carregaListaNotas(num) {     
      $('#notas').DataTable(
          {
          "autoWidth": false,
          "responsive": true,
          "pageLength": num,   
          "page": 5,
          "language": {"url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Portuguese-Brasil.json"},
          "columnDefs": [{"targets": 5, "className": "text-right"}],
          "pagingType": "full",
          "paging":   true,
          "ordering": true,
          "searching": true,
          "serverSide": true,
          "processing": true,
          "bDestroy": true,
          "ajax": "GetNotasFiscais"
          });      
    }


    function carregaListaItens(num) {     
      $('#itens').DataTable(
          {
          "autoWidth": false,
          "responsive": true,
          "pageLength": num,   
          "page": 5,
          "language": {"url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Portuguese-Brasil.json"},
          "columnDefs": [{"targets": [3,4,5,6,7], "className": "text-right"}],
          "pagingType": "full",
          "paging":   true,
          "ordering": true,
          "searching": false,
          "serverSide": true,
          "processing": true,
          "bDestroy": true,
          "ajax": "GetNotasFiscaisItens"
          });      
    }


    function carregaListaCFOPS(num) {     
      $('#cfops').DataTable(
          {
          "autoWidth": false,
          "responsive": true,
          "pageLength": num,   
          "page": 5,
          "language": {"url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Portuguese-Brasil.json"},
          "language": {"info": ""},
          "columnDefs": [{"targets": 1, "className": "text-right"}],
          "pagingType": "full",
          "paging":   false,
          "ordering": false,
          "searching": false,
          "serverSide": true,
          "processing": true,
          "bDestroy": true,
          "ajax": "GetNotasFiscaisCFOPS"
          });      
    }


    function carregaListaParcelas(num) {     
      $('#parcelas').DataTable(
          {
          "autoWidth": false,
          "responsive": true,
          "pageLength": num,   
          "page": 5,
          "language": {"url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Portuguese-Brasil.json"},
          "columnDefs": [{"targets": [0,4,5,6,7], "className": "text-right"}],
          "pagingType": "full",
          "paging":   true,
          "ordering": true,
          "searching": true,
          "serverSide": true,
          "processing": true,
          "bDestroy": true,
          "ajax": "GetNotasFiscaisParcelas"
          });      
    }

    function chamaHelpCliente(tipo) {
      if ($("#IWEDITDATAEMISSAO").is('[disabled]')) {
       } else {
        document.getElementById('IWEDITNOME').value = '[HelpCliente]'+tipo;
        AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
        $("#IWBUTTONACAO").click();                      
       }
    }

    function chamaHelpValidacao(tipo) {
      if ($("#IWEDITDATAEMISSAO").is('[disabled]')) {
       } else {
        document.getElementById('IWEDITNOME').value = '[HelpValidacao]'+tipo;
        AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
        $("#IWBUTTONACAO").click();                      
       }
    }

    function chamaHelpVendedor() {
      if ($("#IWEDITDATAEMISSAO").is('[disabled]')) {
       } else {
        document.getElementById('IWEDITNOME').value = '[HelpVendedor]';
        AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
        $("#IWBUTTONACAO").click();                      
       }
    }

    function chamaHelpCondicao() {
      if ($("#IWEDITDATAEMISSAO").is('[disabled]')) {
       } else {
        document.getElementById('IWEDITNOME').value = '[HelpCondicao]';
        AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
        $("#IWBUTTONACAO").click();                      
       }
    }

    function chamaHelpCobranca() {
      if ($("#IWEDITDATAEMISSAO").is('[disabled]')) {
       } else {
        document.getElementById('IWEDITNOME').value = '[HelpCobranca]';
        AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
        $("#IWBUTTONACAO").click();                      
       }
    }

    function chamaHelpClassificacao() {
      if ($("#IWEDITDATAEMISSAO").is('[disabled]')) {
       } else {
        document.getElementById('IWEDITNOME').value = '[HelpClassificacao]';
        AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
        $("#IWBUTTONACAO").click();                      
       }
    }

    function chamaHelpProduto(tipo) {
      document.getElementById('IWEDITNOME').value = '[HelpProduto]'+tipo;
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();                      
    }

    function limpaNotaFiscal() {
      document.getElementById('IWEDITNOME').value = '[LimpaNotaFiscal]';
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();                      
    }

    function calculaTotal() {
      document.getElementById('IWEDITNOME').value = '[CalculaTotal]';
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();                      
    }

// HELPS
    function carregaListaClientes(num) {     
      $('#clientes').DataTable(
          {
          "autoWidth": false,
          "responsive": true,
          "pageLength": num,   
          "page": 5,
          "language": {"url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Portuguese-Brasil.json"},
          "pagingType": "full",
          "paging":   true,
          "ordering": true,
          "searching": true,
          "serverSide": true,
          "processing": true,
          "bDestroy": true,
          "ajax": "GetClientesHelp"
          });      
    }

    function carregaListaCobrancas(num) {     
      $('#cobrancas').DataTable(
          {
          "autoWidth": false,
          "responsive": true,
          "pageLength": num,   
          "page": 5,
          "language": {"url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Portuguese-Brasil.json"},
          "pagingType": "full",
          "paging":   true,
          "ordering": true,
          "searching": true,
          "serverSide": true,
          "processing": true,
          "bDestroy": true,
          "ajax": "GetCobrancasHelp"
          });      
    }

    function carregaListaVendedores(num) {     
      $('#vendedores').DataTable(
          {
          "autoWidth": false,
          "responsive": true,
          "pageLength": num,   
          "page": 5,
          "language": {"url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Portuguese-Brasil.json"},
          "pagingType": "full",
          "paging":   true,
          "ordering": true,
          "searching": true,
          "serverSide": true,
          "processing": true,
          "bDestroy": true,
          "ajax": "GetRepresentantesHelp"
          });      
    }

    function carregaListaCondicoes(num) {     
      $('#condicoes').DataTable(
          {
          "autoWidth": false,
          "responsive": true,
          "pageLength": num,   
          "page": 5,
          "language": {"url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Portuguese-Brasil.json"},
          "pagingType": "full",
          "paging":   true,
          "ordering": true,
          "searching": true,
          "serverSide": true,
          "processing": true,
          "bDestroy": true,
          "ajax": "GetCondicoesHelp"
          });      
    }

    function carregaListaClassificacoes(num) {     
      $('#classificacoes').DataTable(
          {
          "autoWidth": false,
          "responsive": true,
          "pageLength": num,   
          "page": 5,
          "language": {"url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Portuguese-Brasil.json"},
          "pagingType": "full",
          "paging":   true,
          "ordering": true,
          "searching": true,
          "serverSide": true,
          "processing": true,
          "bDestroy": true,
          "ajax": "GetClassificacoesHelp"
          });      
    }


    function carregaListaProdutos(num) {     
      $('#produtos').DataTable(
          {
          "autoWidth": false,
          "responsive": true,
          "pageLength": num,   
          "page": 5,
          "language": {"url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Portuguese-Brasil.json"},
          "columnDefs": [{"targets": [5,6], "className": "text-right"}],
          "pagingType": "full",
          "paging":   true,
          "ordering": true,
          "searching": true,
          "serverSide": true,
          "processing": true,
          "bDestroy": true,
          "ajax": "GetProdutosHelp"
          });      
    }

    function carregaListaValidacoes(num) {     
      $('#validacoes').DataTable(
          {
          "autoWidth": false,
          "responsive": true,
          "pageLength": num,   
          "page": 5,
          "language": {"url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Portuguese-Brasil.json"},
          "pagingType": "full",
          "paging":   true,
          "ordering": true,
          "searching": true,
          "serverSide": true,
          "processing": true,
          "bDestroy": true,
          "ajax": "GetValidacoesHelp"
          });      
    }


    function carregaNotaFiscal(idNotaFiscal) {
      document.getElementById('IWEDITID').value = idNotaFiscal;
      AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITNOME').value = '[CarregaNotaFiscal]';
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();              
       document.getElementById("defaultOpen").click();
      $("#IWBUTTONCONFIRMA").hide();
      $("#IWBUTTONALTERA").show();
      $("#IWBUTTONCANCELA").hide();
      $("#IWBUTTONINCLUI").show();
      $("#IWBUTTONEXCLUI").show();            
    }


    function excluiItem(idItem, codItem) {
      var wpagina = $('#itens').DataTable().page();
        if (confirm("Deseja excluir ítem: "+codItem+"?")) {
          $("#loader3").css("display","block");     
          $("#ModalAcessaAPI").modal('show');

            document.getElementById('IWEDITID').value = idItem;
            AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
            document.getElementById('IWEDITNOME').value = '[ExcluiItem]'+wpagina;
            AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
            $("#IWBUTTONACAO").click(); 
        }
    }


    function montaObservacao(parametro) {
      var wobs;
      wobs = '<textarea rows="5" cols="65" id="obsnota" disabled="true">'+parametro+'</textarea>';
      $("#Observacao").html(wobs);
    }


    function setPagina(numPage) {
      $('#notas').DataTable().page(numPage).draw('page');
    }

    function setPagina2(numPage) {
      $('#itens').DataTable().page(numPage).draw('page');
    }

    function openTab(evt, cityName) {
      // Declare all variables
      var i, tabcontent, tablinks;

      // Get all elements with class="tabcontent" and hide them
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }

      // Get all elements with class="tablinks" and remove the class "active"
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }

      // Show the current tab, and add an "active" class to the button that opened the tab
      document.getElementById(cityName).style.display = "block";
      evt.currentTarget.className += " active";
     $('html,body').scrollTop(0);      

     if (cityName=='Lista') {
//        $("#IWBUTTONPARCELA").show();
//        $("#IWBUTTONOUTROS").show();
        $("#IWBUTTONNOVOITEM").text("Novo Ítem");
        $("#IWBUTTONPARCELA").text("Parcelas");
        $("#IWBUTTONOUTROS").text("Outros");
        $("#itensNota").show();
        $("#itemNota").hide();
        $("#parcelasNota").hide();
        $("#IWBUTTONINCLUI").show();
        carregaListaNotas(25);
     } else {
          $("#IWBUTTONNOVOITEM").text("Novo Ítem");
          $("#IWBUTTONPARCELA").text("Parcelas");
          $("#IWBUTTONOUTROS").text("Outros");
          $("#itensNota").show();
          $("#itemNota").hide();      
     }

    }

    function habilitaEdicao() {
      $("#divBotoes").css("display","none");
      $("#IWEDITDATAEMISSAO").prop("disabled",false);
      $("#IWEDITNOMECLIENTE").prop("disabled",false);
      $("#IWEDITNOMEVENDEDOR").prop("disabled",false);
      $("#IWEDITNOMEALVO").prop("disabled",false);
      $("#IWEDITCLASSIFICACAO").prop("disabled",false);
      $("#IWEDITCONDICAOPAGAMENTO").prop("disabled",false);
      $("#IWEDITDOCUMENTOCOBRANCA").prop("disabled",false);
      $("#IWEDITESPECIE").prop("disabled",false);
      $("#IWEDITSERIE").prop("disabled",false);
      $("#IWEDITORDEMSERVICO").prop("disabled",false);
      $("#IWEDITORDEMCOMPRA").prop("disabled",false);
      $("#IWMEMOOBSERVACAO").prop("disabled",false);
      $("#IWEDITDATASAIDA").prop("disabled",false);
      $("#IWEDITHORASAIDA").prop("disabled",false);
      $("#Observacao").prop("disabled",false);
      $("#obsnota").prop("disabled",false);
      $("#selectmodelo").prop("disabled",false);
    }

    function desabilitaEdicao() {
      $("#IWEDITDATAEMISSAO").prop("disabled",true);
      $("#IWEDITNOMECLIENTE").prop("disabled",true);
      $("#IWEDITNOMEVENDEDOR").prop("disabled",true);
      $("#IWEDITNOMEALVO").prop("disabled",true);
      $("#IWEDITCLASSIFICACAO").prop("disabled",true);
      $("#IWEDITCONDICAOPAGAMENTO").prop("disabled",true);
      $("#IWEDITDOCUMENTOCOBRANCA").prop("disabled",true);
      $("#IWEDITESPECIE").prop("disabled",true);
      $("#IWEDITSERIE").prop("disabled",true);
      $("#IWEDITORDEMSERVICO").prop("disabled",true);
      $("#IWEDITORDEMCOMPRA").prop("disabled",true);
      $("#IWMEMOOBSERVACAO").prop("disabled",true);
      $("#IWEDITDATASAIDA").prop("disabled",true);
      $("#IWEDITHORASAIDA").prop("disabled",true);
      $("#Observacao").prop("disabled",true);
      $("#obsnota").prop("disabled",true);
      $("#selectmodelo").prop("disabled",true);
    }

    function selecionaValidacao(idValidacao, abrevia) {
      document.getElementById('IWEDITIDVALIDACAO').value = idValidacao;
      AddChangedControl('IWEDITIDVALIDACAO');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITNOME').value = '[SelecionaValidacao]'+abrevia;
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();              
      $("#ModalValidacao").modal("hide");
    }

    function selecionaCobranca(idCobranca, nomeCobranca) {
      document.getElementById('IWEDITIDCOBRANCA').value = idCobranca;
      AddChangedControl('IWEDITIDCOBRANCA');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITNOME').value = '[SelecionaCobranca]'+nomeCobranca;
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();              
      $("#ModalCobranca").modal("hide");
    }

    function selecionaCliente(idCliente, nomeCliente) {
      document.getElementById('IWEDITIDCLIENTE').value = idCliente;
      AddChangedControl('IWEDITIDCLIENTE');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITNOME').value = '[SelecionaCliente]'+nomeCliente;
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();              
      $("#ModalCliente").modal("hide");
    }

    function selecionaCondicao(idCondicao, nomeCondicao) {
      document.getElementById('IWEDITIDCONDICAO').value = idCondicao;
      AddChangedControl('IWEDITIDCONDICAO');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITNOME').value = '[SelecionaCondicao]'+nomeCondicao;
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();              
      $("#ModalCondicao").modal("hide");
    }

    function selecionaClassificacao(idClassificacao, descricaoClassificacao) {
      document.getElementById('IWEDITIDCLASSIFICACAO').value = idClassificacao;
      AddChangedControl('IWEDITIDCLASSIFICACAO');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITNOME').value = '[SelecionaClassificacao]'+descricaoClassificacao;
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();              
      $("#ModalClassificacao").modal("hide");
    }

    function selecionaRepresentante(idRepresentante, nomeRepresentante) {
      document.getElementById('IWEDITIDREPRESENTANTE').value = idRepresentante;
      AddChangedControl('IWEDITIDREPRESENTANTE');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITNOME').value = '[SelecionaRepresentante]'+nomeRepresentante;
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();              
      $("#ModalVendedor").modal("hide");
    }

    function selecionaProduto(idProduto, codigoProduto, descProduto) {
      document.getElementById('IWEDITIDPRODUTO').value = idProduto;
      AddChangedControl('IWEDITIDPRODUTO');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITID').value = codigoProduto;
      AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick ois       
      document.getElementById('IWEDITNOME').value = '[SelecionaProduto]'+descProduto;
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();              
      $("#ModalProduto").modal("hide");
    }

    function carregaModelo() {
//      $("#selectmodelo").empty();
      $("#selectmodelo").append('<option value="01">01-Nota Fiscal</option>');
      $("#selectmodelo").append('<option value="02">02-Nota Fiscal de Venda a Consumidor</option>');
      $("#selectmodelo").append('<option value="03">03-Nota Fiscal de Entrada</option>');
      $("#selectmodelo").append('<option value="04">04-Nota Fiscal de Produtor</option>');
      $("#selectmodelo").append('<option value="06">06-Nota Fiscal / Conta Energia Elétrica</option>');
      $("#selectmodelo").append('<option value="07">07-Nota Fiscal de Serviço de Transporte</option>');
      $("#selectmodelo").append('<option value="08">08-Conhecimento Transp Rodoviário</option>');
      $("#selectmodelo").append('<option value="09">09-Conhecimento Transp Aquaviário</option>');
      $("#selectmodelo").append('<option value="10">10-Conhecimento Transp Aéreo</option>');
      $("#selectmodelo").append('<option value="11">11-Conhecimento Transp Ferroviário</option>');
      $("#selectmodelo").append('<option value="13">13-Bilhete Passagem Rodoviário</option>');
      $("#selectmodelo").append('<option value="14">14-Bilhete Passagem Aquaviário</option>');
      $("#selectmodelo").append('<option value="15">15-Bilhete Passagem Nota Bagagem</option>');
      $("#selectmodelo").append('<option value="16">16-Bilhete Passagem Ferroviário</option>');
      $("#selectmodelo").append('<option value="17">17-Despacho de Transporte</option>');
      $("#selectmodelo").append('<option value="18">18-Resumo Movimento Diário</option>');
      $("#selectmodelo").append('<option value="1B">1B-Nota Fiscal Avulsa</option>');
      $("#selectmodelo").append('<option value="20">20-Ordem de Coleta de Carga</option>');
      $("#selectmodelo").append('<option value="21">21-Nota Fiscal Serviço de Comunicação</option>');
      $("#selectmodelo").append('<option value="22">22-Nota Fiscal Serviço de Telecomunicação</option>');
      $("#selectmodelo").append('<option value="23">23-GNRE</option>');
      $("#selectmodelo").append('<option value="24">24-Autorização Carregamento e Transporte</option>');
      $("#selectmodelo").append('<option value="25">25-Manifesto de Carga</option>');
      $("#selectmodelo").append('<option value="26">26-Conhecimento Transp Multimodal de Carga</option>');
      $("#selectmodelo").append('<option value="27">27-Nota Fiscal Transp Ferroviário de Carga</option>');
      $("#selectmodelo").append('<option value="28">28-Conta Fornecimento de Gás Canalizado</option>');
      $("#selectmodelo").append('<option value="29">29-Conta Fornecimento de Água Canalizada</option>');
      $("#selectmodelo").append('<option value="29">29-Conta Fornecimento de Água Canalizada</option>');
      $("#selectmodelo").append('<option value="2D">2D-Cupom Fiscal</option>');
      $("#selectmodelo").append('<option value="2E">2E-Cupom Fiscal Bilhete Passagem</option>');
      $("#selectmodelo").append('<option value="55">55-Nota Fiscal Eletrônica - NFe</option>');
      $("#selectmodelo").append('<option value="57">57-Conhecimento Transporte Eletrônico - CTe</option>');
      $("#selectmodelo").append('<option value="58">58-Manifesto Documentos Fiscais Eletrônicos - MDFe</option>');
      $("#selectmodelo").append('<option value="59">59-Cupom Fiscal Eletrônico - CFe</option>');
      $("#selectmodelo").append('<option value="65">65-Nota Fiscal Consumidor Eletrônica - NFCe</option>');
      $("#selectmodelo").append('<option value="67">67-Conhecimento Transporte Eletrônico - CTe</option>');
      $("#selectmodelo").append('<option value="88">88-Conhecimento Transporte de Cargas Avulsas</option>');
    }


    function alteraItem(idItem) {
      $("#IWBUTTONNOVOITEM").hide();
      $("#IWBUTTONPARCELA").show();
      $("#IWBUTTONOUTROS").show();
      document.getElementById('IWEDITID').value = idItem;
      AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITNOME').value = '[AlteraItem]';
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();              
      $("#IWBUTTONNOVOITEM").text("Ítens");
      $("#IWBUTTONPARCELA").text("Confirma");
      $("#IWBUTTONOUTROS").text("Cancela");
      $("#IWEDITCODIGO").focus();
    }

// botões
    $("#IWBUTTONINCLUI").on("click",function(){      
      $("#divBotoes").css("display","none");
      carregaModelo();
      document.getElementById('IWEDITID').value = 0;
      AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITNOME').value = '[IncluiNotaFiscal]';
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();              

      habilitaEdicao();
      $(this).hide();
      $("#IWBUTTONALTERA").hide();
      $("#IWBUTTONCONFIRMA").show();
      $("#IWBUTTONCANCELA").show();
      $("#IWBUTTONEXCLUI").hide();      
    })

    $("#IWBUTTONCANCELA").on("click",function(){      
      desabilitaEdicao(); 
      document.getElementById('IWEDITNOME').value = '[CancelaNotaFiscal]';
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();              

      $(this).hide();
      if (document.getElementById('IWEDITIDNOTAFISCAL').value == 0) {
         $("#IWBUTTONALTERA").hide();
         $("#IWBUTTONEXCLUI").hide();      
       } else {
         $("#IWBUTTONALTERA").show();        
         $("#IWBUTTONEXCLUI").show();      
       }
      $("#IWBUTTONCONFIRMA").hide();
      $("#IWBUTTONINCLUI").show();
      $("#IWBUTTONNOVOITEM").text("Novo Ítem");
      $("#IWBUTTONPARCELA").text("Parcelas");
      $("#IWBUTTONOUTROS").text("Outros");
      $("#IWBUTTONPARCELA").show();
      $("#IWBUTTONOUTROS").show();
    })

    $("#IWBUTTONCONFIRMA").on("click",function(){      
      var wpagina = $('#notas').DataTable().page();
      var wselectModelo = $("#selectmodelo :selected");

      var elemento  = document.getElementById('IWEDITNOMECLIENTE');
      var elemento1 = document.getElementById('IWEDITCONDICAOPAGAMENTO');
      var elemento2 = document.getElementById('IWEDITNOMEVENDEDOR');
      var elemento3 = document.getElementById('IWEDITDOCUMENTOCOBRANCA');
      if ((elemento.value=='') || (elemento1.value=='') || (elemento2.value=='') || (elemento3.value=='')) {
         alert("Campo(s) obrigatório(s) devem ser preenchidos");
         if (elemento.value=='') {
            document.getElementById('IWEDITNOMECLIENTE').focus();
         } else if (elemento1.value=='') {
            document.getElementById('IWEDITCONDICAOPAGAMENTO').focus();          
         } else if (elemento2.value=='') {
            document.getElementById('IWEDITNOMEVENDEDOR').focus();          
         } else if (elemento3.value=='') {
            document.getElementById('IWEDITDOCUMENTOCOBRANCA').focus();          
         }

      } else {        
              desabilitaEdicao();
              $(this).hide();
              $("#IWBUTTONNOVOITEM").text("Novo Ítem");
              $("#IWBUTTONPARCELA").text("Parcelas");
              $("#IWBUTTONOUTROS").text("Outros");
              $("#IWBUTTONPARCELA").show();
              $("#IWBUTTONOUTROS").show();
              $("#IWBUTTONALTERA").show();
              $("#IWBUTTONCANCELA").hide();
              $("#IWBUTTONINCLUI").show();
              $("#IWBUTTONEXCLUI").show();      
              $("#loader3").css("display","block");     
              $("#ModalAcessaAPI").modal('show');
              document.getElementById('IWEDITMODELO').value = wselectModelo.val();
              AddChangedControl('IWEDITMODELO');   // colocar essa linha sempre que usar o onAsyncClick ois       
              document.getElementById('IWEDITOBSERVACAO').value = $("#obsnota").val();
              AddChangedControl('IWEDITOBSERVACAO');   // colocar essa linha sempre que usar o onAsyncClick ois       
              document.getElementById('IWEDITNOME').value = '[ConfirmaNotaFiscal]'+wpagina;
              AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
              $("#IWBUTTONACAO").click(); 

      }             
    })

    $("#IWBUTTONALTERA").on("click",function(){  
      //document.getElementById('IWEDITID').value = 0;
      //AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITNOME').value = '[AlteraNotaFiscal]';
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      // Habilita edits
      $("#IWBUTTONACAO").click();              
      habilitaEdicao();

      $(this).hide();
      $("#IWBUTTONCONFIRMA").show();
      $("#IWBUTTONCANCELA").show();
      $("#IWBUTTONINCLUI").hide();
      $("#IWBUTTONEXCLUI").hide();      
      $("#itensNota").show();
      $("#itemNota").hide();
      $("#parcelasNota").hide();          
    })

    $("#IWBUTTONEXCLUI").on("click",function(){      
      var wid   = document.getElementById('IWEDITIDNOTAFISCAL').value;
      var wpagina = $('#notas').DataTable().page();


        if (confirm("Deseja excluir nota fiscal?")) {
          $("#loader3").css("display","block");     
          $("#ModalAcessaAPI").modal('show');

            document.getElementById('IWEDITID').value = wid;
            AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
            document.getElementById('IWEDITNOME').value = '[ExcluiNotaFiscal]'+wpagina;
            AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
            $("#IWBUTTONACAO").click(); 
        }
      $(this).hide();
      $("#IWBUTTONCONFIRMA").hide();
      $("#IWBUTTONCANCELA").hide();
      $("#IWBUTTONINCLUI").show();
      $("#IWBUTTONALTERA").hide();      
    })

  	$(function(){
  	    $("#myDropdown").mouseleave(function(){
  	   	  myFunction();
  	    });
  	});

    function excluiNotaFiscal(idNFe, chaveNFe, situacaoNFe) {
      var wpagina = $('#notas').DataTable().page();
      if (situacaoNFe=='A') {
        alert('Nota Fiscal já anulada!');
      } else if ((chaveNFe=='') && (confirm("Deseja excluir nota fiscal?"))) {
        $("#loader3").css("display","block");     
        $("#ModalAcessaAPI").modal('show');
          document.getElementById('IWEDITID').value = idNFe;
          AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
          document.getElementById('IWEDITNOME').value = '[ExcluiNotaFiscal]'+wpagina;
          AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
          $("#IWBUTTONACAO").click(); 
      } else if ((chaveNFe!='') && (confirm("Deseja anular nota fiscal?"))) {
        $("#loader3").css("display","block");     
        $("#ModalAcessaAPI").modal('show');
          document.getElementById('IWEDITID').value = idNFe;
          AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
          document.getElementById('IWEDITNOME').value = '[AnulaNotaFiscal]'+wpagina;
          AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
          $("#IWBUTTONACAO").click(); 
      }      

    }

  	function myFunction() {
  	  document.getElementById("myDropdown").classList.toggle("show");
  	}

  	function autorizaNFeNFCe() {
        var wid   = document.getElementById('IWEDITIDNOTAFISCAL').value;
        var wpagina = $('#notas').DataTable().page();
        var elemento = document.getElementById('IWEDITCHAVENFE').value;

        if ($('#situacaonota').is(":visible")) {
          alert('Nota Fiscal anulada!');
        } else if (elemento != '') {
          alert('Nota Fiscal já autorizada!')
        } else {
            document.getElementById("myDropdown").classList.toggle("show");
            if (confirm("Deseja autorizar nota fiscal?")) {
                $("#loader3").css("display","block");     
                $("#ModalAcessaAPI").modal('show');

                  document.getElementById('IWEDITID').value = wid;
                  AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
                  document.getElementById('IWEDITNOME').value = '[AutorizaNotaFiscal]'+wpagina;
                  AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
                  $("#IWBUTTONACAO").click(); 
              }
        }
  	}

    function autorizaNFe(idNFe, chaveNFe, situacaoNFe) {
        var wpagina = $('#notas').DataTable().page();
        if (situacaoNFe=='A') {
          alert('Nota Fiscal anulada!');
        } else if (chaveNFe != '') {
          alert('Nota Fiscal já autorizada!');
        } else {
                if (confirm("Deseja autorizar nota fiscal?")) {
                    $("#loader3").css("display","block");     
                    $("#ModalAcessaAPI").modal('show');
                      document.getElementById('IWEDITID').value = idNFe;
                      AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
                      document.getElementById('IWEDITNOME').value = '[AutorizaNotaFiscal]'+wpagina;
                      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
                      $("#IWBUTTONACAO").click(); 
                  }
        }
    }


    function retornaXML(chaveNFe) {
      var wpagina = $('#notas').DataTable().page();        
      $("#loader3").css("display","block");           
      $("#ModalAcessaAPI").modal({backdrop: "static"});

      document.getElementById('IWEDITID').value = chaveNFe;
      AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
      document.getElementById('IWEDITNOME').value = '[RetornaXML]'+wpagina;
      AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
      $("#IWBUTTONACAO").click();      
    }

    function retornaPDF(chaveNFe, situacaoNFe) {
      var wpagina = $('#notas').DataTable().page();        
      if (situacaoNFe=='A') {
        alert('Nota Fiscal anulada!');
      } else if (chaveNFe == '') {
        alert('Nota Fiscal não autorizada!');
      } else {
            $("#loader3").css("display","block");           
            $("#ModalAcessaAPI").modal({backdrop: "static"});

            document.getElementById('IWEDITID').value = chaveNFe;
            AddChangedControl('IWEDITID');   // colocar essa linha sempre que usar o onAsyncClick pois co
            document.getElementById('IWEDITNOME').value = '[RetornaPDF]'+wpagina;
            AddChangedControl('IWEDITNOME');   // colocar essa linha sempre que usar o onAsyncClick ois       
            $("#IWBUTTONACAO").click();      
          }
    }

    function fechaModalPDF() {
      $("#ModalArquivoPDF").modal("hide");
    }

  </script>
  </body>
</html>